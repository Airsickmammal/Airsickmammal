<html>

<head>
    <title>OAuth Callback</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
    <script>
        window.addEventListener("load", function(event) {
            var $code = document.getElementsByName("code")[0],
                $login = document.getElementsByName("login")[0],
                $secret = document.getElementsByName("secret")[0],
                $button = document.getElementById("createToken");
            $code.value = new URLSearchParams(window.location.search).get('code')
            $button.addEventListener('click', function(event) {
                fetch('https://bnorth.sandbox.mpo.mambu.com/api/2/json/public/2119/f07e0d25506693556e490d6a2149add45963ed60', {
                        method: "POST",
                        mode: "cors",
                        body: JSON.stringify({
                            'code': $code.value
                        }),
                        credentials: 'include',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': 'Basic ' + btoa($login.value + ':' + $secret.value)
                        }
                    })
                    .then(function(response) {
                        console.log("Success!");
                    }).catch(function(error) {
                        console.log(error);
                    });
                event.preventDefault();
            });
        });
    </script>
</head>

<body>
    <div class="container">
        <h1>Salesforce OAuth Callback</h1>
        <form>
            <div class="form-group">
                <label for="code">Code</label>
                <input name="code" class="form-control" type="text">
            </div>
        </form>
    </div>
</body>
</html>
